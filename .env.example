# ══════════════════════════════════════════════════
#   Call Processing Pipeline — Configuration
#   Copy to .env and fill in your values
# ══════════════════════════════════════════════════

# --- Directories ---
MEETINGS_DIR=./meetings              # Where audio files are stored and processed
KRISP_DOWNLOADS_DIR=~/Downloads      # Where Krisp initially saves recordings

# --- Krisp Download ---
KRISP_EMAIL=                         # Your Krisp account email
KRISP_MODE=auto                      # auto | manual
KRISP_CHECK_INTERVAL=300             # Seconds between download checks

# --- Transcription Mode ---
# false = run whisper locally (needs faster-whisper + ~2 GB RAM)
# true  = offload to a remote server via SSH (see Remote Server below)
TRANSCRIBE_REMOTE=false

# --- Whisper Settings (used in both local and remote modes) ---
WHISPER_MODEL_SIZE=medium            # small | medium | large-v3
WHISPER_DEVICE=cpu                   # cpu | cuda
WHISPER_COMPUTE_TYPE=int8            # int8 | float16 | float32
WHISPER_CPU_THREADS=4
LANGUAGE=ru                          # ISO 639-1 language code
DIARIZE=true                         # Speaker diarization
NUM_SPEAKERS=0                       # 0 = auto-detect

# --- Remote Server (only when TRANSCRIBE_REMOTE=true) ---
# Deploy first: ./remote/deploy.sh user@host
REMOTE_HOST=                         # IP or hostname of your server
REMOTE_USER=root                     # SSH user
REMOTE_SSH_KEY=                      # Path to SSH key (empty = default key / ssh-agent)
REMOTE_WORKER_DIR=/opt/call-processing  # Where worker.py lives on the server
REMOTE_WORK_DIR=/tmp/call-processing    # Temp dir for audio/transcripts on the server

# --- CalDAV Calendar (for meeting name resolution) ---
CALDAV_URL=                          # e.g. https://caldav.yandex.ru/
CALDAV_USERNAME=                     # Your calendar account email
CALDAV_PASSWORD=                     # App-specific password recommended
CALDAV_CALENDAR_NAME=                # Calendar name to search

# --- YouTrack Integration (optional) ---
YOUTRACK_ENABLED=false
YOUTRACK_URL=                        # e.g. https://your-instance.youtrack.cloud
YOUTRACK_TOKEN=                      # Permanent token (Hub > Profile > Authentication)
YOUTRACK_PROJECT=                    # Project short name (e.g. PRJ)

# --- Markdown Inbox (optional) ---
INBOX_ENABLED=false
INBOX_FILE=                          # Path to your kanban-style markdown task file

# --- Processing Schedule ---
# window: check every SCHEDULE_INTERVAL min during SCHEDULE_WINDOW
# daily:  single run at SCHEDULE_TIME each day
SCHEDULE_MODE=window                 # window | daily
SCHEDULE_WINDOW=12:00-23:30          # HH:MM-HH:MM active hours (window mode)
SCHEDULE_INTERVAL=120                # Minutes between checks (window mode)
SCHEDULE_TIME=23:00                  # HH:MM daily run time (daily mode)

# --- Audio Settings ---
AUDIO_EXTENSIONS=.m4a,.mp3,.wav,.aac,.mov
FILE_STABILITY_WAIT=5                # Seconds to wait for file to stabilize
